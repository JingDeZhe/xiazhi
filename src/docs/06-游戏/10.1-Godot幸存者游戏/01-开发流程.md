# 幸存者游戏开发流程

## 创建玩家 UI

1. 像素游戏纹理渲染设置采样为 nearest

## 创建世界场景

## 世界场景基本配置

1. 窗口大小
   1. 视口大小是游戏场景的逻辑大小
   2. 窗口覆盖大小是游戏画面实际显示的大小
   3. 视口大小和窗口覆盖大小不一致的时候需要设置内部元素拉伸模式
2. tileset
   1. 对于不和具体场景关联的资源，可以单独放在 resources 文件夹下管理
   2. tileset 的地形、地形概率

## 主相机设置

1. 通过 Group 在不同常见中共享对象
2. camera 设置 position smooth

## 基本敌人

1. 需要注意玩家和敌人的碰撞层

## 武器（剑）

1. 武器的类别为能力（Ability）
2. 每种能力都有一种实现
3. 每种能力都有一种控制器，控制器接受能力实现的参数
   1. 控制器内部以 Timer 控制能力的实例化

## 剑动画

1. 增加 AnimationPlayer 设置动画
2. 游戏运行途中暂停可以通过 Remote 查看当前的组件树
3. 动画轨道也可以添加方法的调用轨道，比如说剑的实例动画结束后释放资源

## 剑攻击位置

1. 剑攻击距离玩家最近的一名敌人

## 剑的攻击效果

1. 剑添加 Area2D 作为碰撞检测，处于 Layer3 中
2. 敌人添加 Area2D，处于 Mask3 中
3. 敌人 area2d 进入时 queue_free 掉
4. 特别注意：signal.connect(fn)中 fn 的参数一定要和 signal 的 API 匹配，否则不会触发！

## 敌人生成管理器

1. 管理器以一定间隔在屏幕之外生成敌人

## 敌人和玩家移动优化

1. 防止敌人重叠
2. 玩家移动平滑

## 游戏时间

1. 将时间分为管理器和 UI 部分
2. UI 接收的参数是 Node 而不是 PackagedScene

## 经验药剂

1. 经验药剂需要放在 PlayerPickup 层
2. 玩家和经验药剂的检测不和自身的碰撞区域相同，要另起一个 Area2D，因为捡东西的范围肯定会更大并且是动态的

## 生命和药剂掉落

1. 组合模式
2. class_name
