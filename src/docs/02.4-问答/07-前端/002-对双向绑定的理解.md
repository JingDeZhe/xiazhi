# 对双向绑定的理解

双向绑定，就是指页面的变化会自动反应在数据上，而数据的变动也会自动反应在页面上，两者是绑定的。

Vue 中的双向绑定实际上就是 v-model，而 v-model 是一个语法汤，可以拆成两个部分：

1. value 的属性绑定
2. input 的事件绑定

对于原生组件而言

```html
<input v-model="v" />
<!-- 等同于 -->
<input v-bind:value="v" @input="e => v = e.target.value" />
```

对于自定义组件，如果想要使用 v-model，则需要在内部触发 input 的事件：`this.$emit('input', newValue)`。

根据上面 v-model 的实现，可以看出其实内部原理和 v-bind 的 sync 修饰符差不多，实际上在 vue3 中的确移除了 sync 修饰符，统一用 v-model 来表示。

## 双向绑定的内部实现

双向绑定内部是依靠相应性原理的，也就是 defineProperty 和 Proxy 那些，简而言之就是搜集 data 上数据在 DOM 上的依赖项，这样 data 中的数据变化，就可以更具依赖项更新 DOM 内容，而 DOM 内容变化也可以根据 v-model 的绑定同步更新到 data 上。

更具体的细节见后文。
